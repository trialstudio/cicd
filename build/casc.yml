---
credentials:
  system:
    domainCredentials:
      - credentials:
          - usernamePassword:
              id: "github"
              password: "${GITHUB_PAT}"
              scope: GLOBAL
              username: "${GITHUB_USERNAME}"
              usernameSecret: true

jenkins:
  authorizationStrategy:
    projectMatrix:
      permissions:
        - "GROUP:Overall/Administer:trialstudio*site-reliability-engineers"
        - "GROUP:Overall/Read:trialstudio"
  markupFormatter:
    rawHtml:
      disableSyntaxHighlighting: false
  mode: EXCLUSIVE
  noUsageStatistics: true
  numExecutors: 1
  securityRealm:
    github:
      clientID: "${GITHUB_OAUTH_ID}"
      clientSecret: "${GITHUB_OAUTH_SECRET}"
      githubApiUri: "https://api.github.com"
      githubWebUri: "https://github.com"
      oauthScopes: "read:org,user:email"

security:
  apiToken:
    usageStatisticsEnabled: false
  globalJobDslSecurityConfiguration:
    useScriptSecurity: false

unclassified:
  buildDiscarders:
    configuredBuildDiscarders:
      - "jobBuildDiscarder"
      - simpleBuildDiscarder:
          discarder:
            logRotator:
              numToKeepStr: "20"
  globalDefaultFlowDurabilityLevel:
    durabilityHint: PERFORMANCE_OPTIMIZED
  globalLibraries:
    libraries:
      - defaultVersion: "main"
        name: "job-dsl"
        retriever:
          modernSCM:
            libraryPath: "scripts/"
            scm:
              git:
                credentialsId: "github"
                remote: "https://github.com/trialstudio/cicd.git"
  location:
    adminAddress: "address not configured yet <nobody@nowhere> ${TERM}"
    url: "http://jenkins.trial.studio/"
  prometheusConfiguration:
    collectDiskUsage: false
    collectingMetricsPeriodInSeconds: 15
  timestamper:
    allPipelines: true

jobs:
  - url: https://raw.githubusercontent.com/trialstudio/cicd/main/scripts/createSeedJob.groovy